{"filter":false,"title":"db.js","tooltip":"/VIMAT/js/db.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":55},"end":{"row":168,"column":56}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":54},"end":{"row":168,"column":56}},"text":"pr"},{"action":"insertText","range":{"start":{"row":168,"column":54},"end":{"row":168,"column":65}},"text":"projectList"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":72},"end":{"row":168,"column":73}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":73},"end":{"row":168,"column":74}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":74},"end":{"row":168,"column":75}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":75},"end":{"row":168,"column":76}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":76},"end":{"row":168,"column":77}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":77},"end":{"row":168,"column":78}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":168,"column":78},"end":{"row":168,"column":79}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":79},"end":{"row":168,"column":80}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":79},"end":{"row":168,"column":80}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":79},"end":{"row":168,"column":80}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":168,"column":79},"end":{"row":168,"column":80}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":21},"end":{"row":169,"column":22}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":22},"end":{"row":169,"column":23}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":23},"end":{"row":169,"column":24}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":24},"end":{"row":169,"column":25}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":25},"end":{"row":169,"column":26}},"text":"e"},{"action":"insertText","range":{"start":{"row":169,"column":26},"end":{"row":169,"column":27}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":27},"end":{"row":169,"column":28}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":27},"end":{"row":169,"column":28}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":27},"end":{"row":169,"column":28}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":28},"end":{"row":169,"column":29}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":28},"end":{"row":169,"column":29}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":28},"end":{"row":169,"column":29}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":28},"end":{"row":169,"column":29}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":52},"end":{"row":169,"column":53}},"text":"-"},{"action":"insertText","range":{"start":{"row":169,"column":53},"end":{"row":169,"column":54}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":53},"end":{"row":169,"column":54}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":52},"end":{"row":169,"column":53}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":52},"end":{"row":169,"column":53}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":53},"end":{"row":169,"column":54}},"text":"r"},{"action":"insertText","range":{"start":{"row":169,"column":54},"end":{"row":169,"column":55}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":55},"end":{"row":169,"column":56}},"text":"j"},{"action":"insertText","range":{"start":{"row":169,"column":56},"end":{"row":169,"column":57}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":169,"column":57},"end":{"row":169,"column":58}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":59},"end":{"row":169,"column":60}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":59},"end":{"row":169,"column":60}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":169,"column":59},"end":{"row":169,"column":60}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":172,"column":0},"end":{"row":188,"column":0}},"nl":"\n","lines":["        var projectArray = [],","            p, i, l;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.taskListDb) {","                projectArray = JSON.parse(localStorage.projectListDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        l = projectArray.length;","        for (i = 0; i < l; i++) {","            p = projectArray[i];","            VIMAT.MODEL.PROJECTS.projectList.addTask(p);","        }"]},{"action":"insertText","range":{"start":{"row":172,"column":0},"end":{"row":172,"column":33}},"text":"        var taskStringArray = [];"},{"action":"insertText","range":{"start":{"row":172,"column":33},"end":{"row":173,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":173,"column":0},"end":{"row":183,"column":0}},"lines":["        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.taskListDb) {","                taskStringArray = JSON.parse(localStorage.taskListDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        VIMAT.MODEL.TASKS.taskList.addTasksFromStrings(taskStringArray);"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":29},"end":{"row":174,"column":30}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":30},"end":{"row":174,"column":31}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":31},"end":{"row":174,"column":32}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":32},"end":{"row":174,"column":33}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":33},"end":{"row":174,"column":34}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":34},"end":{"row":174,"column":35}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":174,"column":35},"end":{"row":174,"column":36}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":174,"column":36},"end":{"row":174,"column":37}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":174,"column":36},"end":{"row":174,"column":37}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":174,"column":36},"end":{"row":174,"column":37}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":174,"column":36},"end":{"row":174,"column":37}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":12},"end":{"row":172,"column":13}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":13},"end":{"row":172,"column":14}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":14},"end":{"row":172,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":15},"end":{"row":172,"column":16}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":16},"end":{"row":172,"column":17}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":17},"end":{"row":172,"column":18}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":172,"column":18},"end":{"row":172,"column":19}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":172,"column":19},"end":{"row":172,"column":20}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":172,"column":19},"end":{"row":172,"column":20}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":172,"column":19},"end":{"row":172,"column":20}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":172,"column":19},"end":{"row":172,"column":20}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":16},"end":{"row":175,"column":17}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":17},"end":{"row":175,"column":18}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":18},"end":{"row":175,"column":19}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":19},"end":{"row":175,"column":20}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":20},"end":{"row":175,"column":21}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":21},"end":{"row":175,"column":22}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":23},"end":{"row":175,"column":24}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":23},"end":{"row":175,"column":24}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":23},"end":{"row":175,"column":24}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":61},"end":{"row":175,"column":62}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":62},"end":{"row":175,"column":63}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":63},"end":{"row":175,"column":64}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":64},"end":{"row":175,"column":65}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":65},"end":{"row":175,"column":66}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":175,"column":66},"end":{"row":175,"column":67}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":68},"end":{"row":175,"column":69}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":68},"end":{"row":175,"column":69}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":175,"column":68},"end":{"row":175,"column":69}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":55},"end":{"row":182,"column":56}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":56},"end":{"row":182,"column":57}},"text":"r"},{"action":"insertText","range":{"start":{"row":182,"column":57},"end":{"row":182,"column":58}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":58},"end":{"row":182,"column":59}},"text":"j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":59},"end":{"row":182,"column":60}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":60},"end":{"row":182,"column":61}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":62},"end":{"row":182,"column":63}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":62},"end":{"row":182,"column":63}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":62},"end":{"row":182,"column":63}},"text":"k"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":20},"end":{"row":182,"column":25}},"text":"TASKS"},{"action":"insertText","range":{"start":{"row":182,"column":20},"end":{"row":182,"column":21}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":21},"end":{"row":182,"column":22}},"text":"R"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":22},"end":{"row":182,"column":23}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":23},"end":{"row":182,"column":24}},"text":"J"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":24},"end":{"row":182,"column":25}},"text":"E"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":25},"end":{"row":182,"column":26}},"text":"C"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":26},"end":{"row":182,"column":27}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":20},"end":{"row":182,"column":27}},"text":"PROJECT"},{"action":"insertText","range":{"start":{"row":182,"column":20},"end":{"row":182,"column":28}},"text":"PROJECTS"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":29},"end":{"row":182,"column":30}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":30},"end":{"row":182,"column":31}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":31},"end":{"row":182,"column":32}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":32},"end":{"row":182,"column":33}},"text":"j"},{"action":"insertText","range":{"start":{"row":182,"column":33},"end":{"row":182,"column":34}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":182,"column":34},"end":{"row":182,"column":35}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":36},"end":{"row":182,"column":37}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":36},"end":{"row":182,"column":37}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":182,"column":36},"end":{"row":182,"column":37}},"text":"k"}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":303,"column":1},"action":"remove","lines":["/*","\t******************************************************************","\t Copyright 2013 Nicholas Warner","","\t This file is part of vimat.","","    vimat is free software: you can redistribute it and/or modify","    it under the terms of the GNU General Public License as published by","    the Free Software Foundation, either version 3 of the License, or","    (at your option) any later version.","","    vimat is distributed in the hope that it will be useful,","    but WITHOUT ANY WARRANTY; without even the implied warranty of","    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","    GNU General Public License for more details.","","    You should have received a copy of the GNU General Public License","    along with vimat.  If not, see <http://www.gnu.org/licenses/>.","\t******************************************************************","*/","","var VIMAT = VIMAT || {};","","/*","    The VIMAT.DB serves as a facade. The save/load functions point to","    whatever sub-module (or sub-namespace) the user has selected for data persistence.","    For now the only option is HTML5 LocalStorage.","*/","","VIMAT.namespace(\"VIMAT.DB\");","VIMAT.DB = (function () {","    // *** Dependencies","","    // *** Private Properties","    // dbType is an integer representing the type of data storage in use","    //      0   --  HTML5 LocalStorage","    var dbType = 0;","","    // *** Private methods","    function saveTaskList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveTaskList();","                break;","            ","            default:","                // code","        }","    }","    function loadTaskList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadTaskList();","                break;","            ","            default:","                // code","        }","    }","    function saveProjectList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveProjectList();","                break;","            ","            default:","                // code","        }","    }","    function loadProjectList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadProjectList();","                break;","            ","            default:","                // code","        }","    }","    function saveListOfLists() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveListOfLists();","                break;","            ","            default:","                // code","        }","    }","    function loadListOfLists() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadListOfLists();","                break;","            ","            default:","                // code","        }","    }","    function saveSettings() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveSettings();","                break;","            ","            default:","                // code","        }","    }","    function loadSettings() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadSettings();","                break;","            ","            default:","                // code","        }","    }","    function getDbType() {","        return dbType;","    }","    function setDbType(dbt) {","        dbType = dbt;","    }","","    // *** Initialization","","    // *** Public API","    return {","        saveTaskList:       saveTaskList,","        loadTaskList:       loadTaskList,","        saveProjectList:    saveProjectList,","        loadProjectList:    loadProjectList,","        saveListOfLists:    saveListOfLists,","        loadListOfLists:    loadListOfLists,","        saveSettings:       saveSettings,","        loadSettings:       loadSettings,","        getDbType:          getDbType,","        setDbType:          setDbType","    };","}());","","VIMAT.namespace(\"VIMAT.DB.LOCALSTORAGE\");","VIMAT.DB.LOCALSTORAGE = (function () {","    // *** Dependencies","","    // *** Private Properties","","    // *** Private methods","    function saveTaskList() {","        var taskStringArray = VIMAT.MODEL.TASKS.taskList.getAllTasksToStrings();","        localStorage.taskListDb = JSON.stringify(taskStringArray);","    }","    function loadTaskList() {","        var taskStringArray = [];","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.taskListDb) {","                taskStringArray = JSON.parse(localStorage.taskListDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        VIMAT.MODEL.TASKS.taskList.addTasksFromStrings(taskStringArray);","    }","    function saveProjectList() {","        var projectStringArray = VIMAT.MODEL.PROJECTS.projectList.getAllProjectsToStrings();","        localStorage.projectListDb = JSON.stringify(projectStringArray);","    }","    function loadProjectList() {","        var projectStringArray = [];","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.projectListDb) {","                projectStringArray = JSON.parse(localStorage.projectListDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        VIMAT.MODEL.PROJECTS.projectList.addTasksFromStrings(projectStringArray);","    }","    function saveListOfLists() {","        var listArray = [],","            l = VIMAT.MODEL.LISTS.listOfLists.getNumberOfLists(),","            i, list;","        for (i = 0; i < l; i++) {","            list = VIMAT.MODEL.LISTS.listOfLists.getListAt(i);","            listArray[i] = list;","        }    ","        localStorage.listOfListsDb = JSON.stringify(listArray);","    }","    function loadListOfLists() {","        var listArray = [],","            i, l, list;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.listOfListsDb) {","                listArray = JSON.parse(localStorage.listOfListsDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        l = listArray.length;","        for (i = 0; i < l; i++) {","            list = new VIMAT.MODEL.LISTS.List();","            list.setName(listArray[i].name);","            list.arrayContent = listArray[i].arrayContent;","            VIMAT.MODEL.LISTS.listOfLists.addList(list);","        }","    }","    function saveSettings() {","        var s;","        localStorage.listOfListsSettingsDb = JSON.stringify(VIMAT.SETTINGS.listOfLists.getCurrentListName());","        s = VIMAT.SETTINGS.taskList.getStateString();","        localStorage.taskListSettingsDb = JSON.stringify(s);","    }","    function loadSettings() {","        var s;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.listOfListsSettingsDb) {","                VIMAT.SETTINGS.listOfLists.setCurrentListName(JSON.parse(localStorage.listOfListsSettingsDb));","            }","            if (localStorage.taskListSettingsDb) {","                s = JSON.parse(localStorage.taskListSettingsDb);","                VIMAT.SETTINGS.taskList.setStateFromString(s);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","    }","","    // *** Initialization","","    // *** Public API","    return {","        saveTaskList:       saveTaskList,","        loadTaskList:       loadTaskList,","        saveProjectList:    saveProjectList,","        loadProjectList:    loadProjectList,","        saveListOfLists:    saveListOfLists,","        loadListOfLists:    loadListOfLists,","        saveSettings:       saveSettings,","        loadSettings:       loadSettings","    };","}());","","function loadData() {","    if(typeof(Storage) !== \"undefined\") {","        if (localStorage.tasksdb) {","            var t = JSON.parse(localStorage.tasksdb);","            // if (isArray(t)){","                tasks = t;","            // }","        } ","        if (localStorage.projectsdb) {","            var p = JSON.parse(localStorage.projectsdb);","            // if (isArray(p)){","                projects = p;","            // }","        }","        if (localStorage.notesdb) {","            var n = JSON.parse(localStorage.notesdb);","            // if (isArray(n)){","                notes = n;","            // }","        }","        if (localStorage.trackedTimesdb) {","            var tt = JSON.parse(localStorage.trackedTimesdb);","            // if (isArray(tt)){","                trackedTimes = tt;","            // }","        }","        if (localStorage.settingsdb) {","            var s = JSON.parse(localStorage.settingsdb);","            if (typeof s == 'object'){","                settings = s;","            }","        }","    }","    else {","        alert('Sorry, no local storage on this browser.');","    }","}","function saveTasks() {","    localStorage.tasksdb = JSON.stringify(tasks);","}","function saveProjects() {","    localStorage.projectsdb = JSON.stringify(projects);","}","function saveNotes() {","    localStorage.notesdb = JSON.stringify(notes);","}","function saveTrackedTimes() {","    localStorage.trackedTimesdb = JSON.stringify(trackedTimes);","}","function saveSettings() {","    localStorage.settingsdb = JSON.stringify(settings);","}"]},{"start":{"row":0,"column":0},"end":{"row":296,"column":5},"action":"insert","lines":["/*","\t******************************************************************","\t Copyright 2013 Nicholas Warner","","\t This file is part of vimat.","","    vimat is free software: you can redistribute it and/or modify","    it under the terms of the GNU General Public License as published by","    the Free Software Foundation, either version 3 of the License, or","    (at your option) any later version.","","    vimat is distributed in the hope that it will be useful,","    but WITHOUT ANY WARRANTY; without even the implied warranty of","    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","    GNU General Public License for more details.","","    You should have received a copy of the GNU General Public License","    along with vimat.  If not, see <http://www.gnu.org/licenses/>.","\t******************************************************************","*/","","var VIMAT = VIMAT || {};","","/*","    The VIMAT.DB serves as a facade. The save/load functions point to","    whatever sub-module (or sub-namespace) the user has selected for data persistence.","    For now the only option is HTML5 LocalStorage.","*/","","VIMAT.namespace(\"VIMAT.DB\");","VIMAT.DB = (function () {","    // *** Dependencies","","    // *** Private Properties","    // dbType is an integer representing the type of data storage in use","    //      0   --  HTML5 LocalStorage","    var dbType = 0;","","    // *** Private methods","    function saveTaskList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveTaskList();","                break;","            ","            default:","                // code","        }","    }","    function loadTaskList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadTaskList();","                break;","            ","            default:","                // code","        }","    }","    function saveProjectList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveProjectList();","                break;","            ","            default:","                // code","        }","    }","    function loadProjectList() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadProjectList();","                break;","            ","            default:","                // code","        }","    }","    function saveListOfLists() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveListOfLists();","                break;","            ","            default:","                // code","        }","    }","    function loadListOfLists() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadListOfLists();","                break;","            ","            default:","                // code","        }","    }","    function saveSettings() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveSettings();","                break;","            ","            default:","                // code","        }","    }","    function loadSettings() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadSettings();","                break;","            ","            default:","                // code","        }","    }","    function saveHistory() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.saveHistory();","                break;","            ","            default:","                // code","        }","    }","    function loadHistory() {","        switch (dbType) {","            case 0:","                VIMAT.DB.LOCALSTORAGE.loadHistory();","                break;","            ","            default:","                // code","        }","    }","    function getDbType() {","        return dbType;","    }","    function setDbType(dbt) {","        dbType = dbt;","    }","","    // *** Initialization","","    // *** Public API","    return {","        saveTaskList:       saveTaskList,","        loadTaskList:       loadTaskList,","        saveProjectList:    saveProjectList,","        loadProjectList:    loadProjectList,","        saveListOfLists:    saveListOfLists,","        loadListOfLists:    loadListOfLists,","        saveSettings:       saveSettings,","        loadSettings:       loadSettings,","        saveHistory:        saveHistory,","        loadHistory:        loadHistory,","        getDbType:          getDbType,","        setDbType:          setDbType","    };","}());","","VIMAT.namespace(\"VIMAT.DB.LOCALSTORAGE\");","VIMAT.DB.LOCALSTORAGE = (function () {","    // *** Dependencies","","    // *** Private Properties","","    // *** Private methods","    function saveTaskList() {","        var taskStringArray = VIMAT.tl.getAllTasksToStrings();","        localStorage.taskListDb = JSON.stringify(taskStringArray);","    }","    function loadTaskList() {","        var taskStringArray = [];","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.taskListDb) {","                taskStringArray = JSON.parse(localStorage.taskListDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        VIMAT.tl.addTasksFromStrings(taskStringArray);","    }","    function saveProjectList() {","        var pa = VIMAT.pl.getList();","        localStorage.projectListDb = JSON.stringify(pa);","    }","    function loadProjectList() {","        var pa;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.projectListDb) {","                pa = JSON.parse(localStorage.projectListDb);","            }","            VIMAT.pl.setList(pa);","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","    }","    function saveListOfLists() {","        var listArray = [],","            l = VIMAT.lol.getNumberOfLists(),","            i, list;","        for (i = 0; i < l; i++) {","            list = VIMAT.lol.getListAt(i);","            listArray[i] = list;","        }    ","        localStorage.listOfListsDb = JSON.stringify(listArray);","    }","    function loadListOfLists() {","        var listArray = [],","            i, l, list;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.listOfListsDb) {","                listArray = JSON.parse(localStorage.listOfListsDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","        l = listArray.length;","        for (i = 0; i < l; i++) {","            var j, acl, li;","            list = new VIMAT.MODEL.LISTS.List();","            list.setName(listArray[i].name);","            acl = listArray[i].arrayContent.length;","            for (j = 0; j < acl; j++) {","                li = new VIMAT.MODEL.LISTS.ListItem(listArray[i].arrayContent[j].description,","                    listArray[i].arrayContent[j].checked);","                list.addListItem(li);                ","            }","            VIMAT.lol.addList(list);","        }","    }","    function saveSettings() {","        var s;","        localStorage.listOfListsSettingsDb = JSON.stringify(VIMAT.SETTINGS.listOfLists.getCurrentListName());","        s = VIMAT.SETTINGS.taskList.getStateString();","        localStorage.taskListSettingsDb = JSON.stringify(s);","    }","    function loadSettings() {","        var s;","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.listOfListsSettingsDb) {","                VIMAT.SETTINGS.listOfLists.setCurrentListName(JSON.parse(localStorage.listOfListsSettingsDb));","            }","            if (localStorage.taskListSettingsDb) {","                s = JSON.parse(localStorage.taskListSettingsDb);","                VIMAT.SETTINGS.taskList.setStateFromString(s);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","    }","    ","    function saveHistory() {","        localStorage.historyDb = JSON.stringify(VIMAT.HISTORY.taskHistory);","    }","    function loadHistory() {","        if(typeof(localStorage) !== \"undefined\") {","            if (localStorage.historyDb) {","                VIMAT.HISTORY.taskHistory = JSON.parse(localStorage.historyDb);","            }","        }","        else {","            alert('Sorry, no local storage on this browser.');","            return;","        }","    }","","","    // *** Initialization","","    // *** Public API","    return {","        saveTaskList:       saveTaskList,","        loadTaskList:       loadTaskList,","        saveProjectList:    saveProjectList,","        loadProjectList:    loadProjectList,","        saveListOfLists:    saveListOfLists,","        loadListOfLists:    loadListOfLists,","        saveSettings:       saveSettings,","        loadSettings:       loadSettings,","        saveHistory:        saveHistory,","        loadHistory:        loadHistory","    };","}());"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":296,"column":5},"end":{"row":296,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1429979870642,"hash":"5688a9f38a10bf583d80cf1d9ebe315c5349b415"}